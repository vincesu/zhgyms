<html>
<head>
	<script src="jquery-1.4.min.js" type="text/javascript"></script>
	<script src="jquery.flash.min.js" type="text/javascript"></script>
	<link type="text/css" rel="stylesheet" href="unrelated.css" />
	
	<script src="agile-uploader-3.0.js" type="text/javascript"></script>
	<link type="text/css" rel="stylesheet" href="agile-uploader.css" />
</head>
<body>

<div id="demo">
<h1>Resize Before Upload Demo (multiple)</h1>

<p>
This example shows a general multiple image uploader that resizes the images before uploading them to the server. (*note: IE7 and IE6 users will not see thumbnails either way, they will always see file icons)
It provides a list of files that the user can see so they know what will be uploaded and gives them the ability to remove any of the files if they change their mind. It also displays the final file size that will be sent to the server.
</p>

<form id="multipleDemo" enctype="multipart/form-data" target="uploadfame">
<label for="title">Title</label><br />
<input id="title" type="input" name="title" />
<br style="clear: left;" />

<div id="multiple"></div>
    
<br style="clear: left;" /><br />
<label for="testdata">Another field</label><br />
<input id="testdata" type="input" name="testdata" />
<br />

</form>

<a href="###" onClick="document.getElementById('agileUploaderSWF').submit();return false;">Submit</a>

<iframe id="uploadfame" name="uploadfame" style="display:none;">
</iframe>
</div>

    <script type="text/javascript">
    	$('#multiple').agileUploader({
//    		submitRedirect: 'results.html',
    		formId: 'multipleDemo',
    		
			flashVars: {
				
				button_up:'add-file.png',
				button_over:'add-file.png',
				button_down:'add-file.png',	
				
				firebug: false,
	    			form_action: '../service/mFileUpload?serviceid=uploadMultipleFiles',
				file_limit: 10,
				max_post_size: (300 * 1024),
				 js_event_handler: '$.fn.myUploadEventHandler'
    		}
    	});	
    	
    	$.fn.myUploadEventHandler = function (event) {

            // First call the default event handler (optional, you could completely rewrite)
            $.fn.agileUploaderEvent(event); 

            // Now handle the events we want to 
            switch (event.type) {
                case 'preview':
//                	$.fn.agileUploaderPreview(event.file);
    				break;
                case 'server_response':
                	document.getElementById('agileUploaderSWF').removeAllFiles();
                	break;
            };
        };
    </script>
</body>
</html>
